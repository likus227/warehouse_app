{% extends "base.html" %}
{% block title %}Faktura {{ faktura.numer }}{% endblock %}
{% block content %}
<div class="px-4 sm:px-0">
    <h3 class="text-3xl font-bold text-gray-900">Faktura: {{ faktura.numer }}</h3>
</div>
<div class="mt-6 bg-white shadow rounded-lg p-6">
    <div class="grid grid-cols-2 gap-6 mb-6">
        <div>
            <h4 class="text-lg font-medium text-gray-900 mb-2">Sprzedawca</h4>
            <p class="text-sm text-gray-700 font-semibold">Hurtownia BHP</p>
            <p class="text-sm text-gray-500">ul. Przykładowa 1</p>
            <p class="text-sm text-gray-500">00-000 Warszawa</p>
        </div>
        <div>
            <h4 class="text-lg font-medium text-gray-900 mb-2">Nabywca</h4>
            <p class="text-sm text-gray-700 font-semibold">{{ faktura.klient.nazwa }}</p>
            <p class="text-sm text-gray-500">NIP: {{ faktura.klient.nip }}</p>
            <p class="text-sm text-gray-500">{{ faktura.klient.adres }}</p>
            <p class="text-sm text-gray-500">{{ faktura.klient.kod_pocztowy }} {{ faktura.klient.miasto }}</p>
        </div>
    </div>
    
    <div class="grid grid-cols-3 gap-4 mb-6 text-sm">
        <div>
            <p class="text-gray-500">Data wystawienia</p>
            <p class="font-medium">{{ faktura.data_wystawienia.strftime('%Y-%m-%d') }}</p>
        </div>
        <div>
            <p class="text-gray-500">Data sprzedaży</p>
            <p class="font-medium">{{ faktura.data_sprzedazy.strftime('%Y-%m-%d') }}</p>
        </div>
        <div>
            <p class="text-gray-500">Termin płatności</p>
            <p class="font-medium">{{ faktura.termin_platnosci.strftime('%Y-%m-%d') if faktura.termin_platnosci else '-' }}</p>
        </div>
    </div>

    <h4 class="text-lg font-medium text-gray-900 mb-4">Pozycje</h4>
    <table class="min-w-full divide-y divide-gray-200 mb-6">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-4 py-2 text-left text-xs font-medium uppercase text-gray-500">Produkt</th>
                <th class="px-4 py-2 text-left text-xs font-medium uppercase text-gray-500">Ilość</th>
                <th class="px-4 py-2 text-left text-xs font-medium uppercase text-gray-500">Cena</th>
                <th class="px-4 py-2 text-left text-xs font-medium uppercase text-gray-500">Wartość</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
            {% for poz in faktura.zamowienie.pozycje %}
            <tr>
                <td class="px-4 py-2 text-sm">{{ poz.produkt_rel.nazwa }}</td>
                <td class="px-4 py-2 text-sm">{{ poz.ilosc }}</td>
                <td class="px-4 py-2 text-sm">{{ "%.2f"|format(poz.cena_jednostkowa) }} zł</td>
                <td class="px-4 py-2 text-sm">{{ "%.2f"|format(poz.wartosc_netto) }} zł</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="flex justify-end">
        <div class="w-64">
            <div class="flex justify-between py-2 border-t">
                <span class="text-sm font-medium">Wartość netto:</span>
                <span class="text-sm">{{ "%.2f"|format(faktura.wartosc_netto) }} zł</span>
            </div>
            <div class="flex justify-between py-2">
                <span class="text-sm font-medium">VAT (23%):</span>
                <span class="text-sm">{{ "%.2f"|format(faktura.wartosc_vat) }} zł</span>
            </div>
            <div class="flex justify-between py-2 border-t-2 border-gray-900">
                <span class="text-lg font-bold">Do zapłaty:</span>
                <span class="text-lg font-bold">{{ "%.2f"|format(faktura.wartosc_brutto) }} zł</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}